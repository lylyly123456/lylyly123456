<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>马赛克2</title>
</head>
<body>
    <canvas id="tutorial1" width="1000" height="1000"></canvas>
</body>
<script>

    var canvas = document.getElementById("tutorial1");//找到画布元素
    var ctx = canvas.getContext("2d");//找到2d环境
    //定义常量
    const width =500;
    const height = 500;
    var context = ctx.createImageData(width,height);//清除画布
    var pixels = context.data; //将像素的信息赋值给变量pixels，便于访问像素
    // 切片
    var numTileRows = 4; 
    var numTileCols = 4; 
    // 每块的宽和高
    var tileWidth = context.width/numTileCols; 
    var tileHeight = context.height/numTileRows;

    // 获取块的位置
    for (var r = 0; r < numTileRows; r++) {
        for (var c = 0; c < numTileCols; c++) {
            var red = Math.floor(Math.random()*255); 
            var green = Math.floor(Math.random()*255); 
            var blue = Math.floor(Math.random()*255); 
            // 获取每个块中每个像素的位置
            for (var tr = 0; tr < tileHeight; tr++){
                for (var tc = 0; tc < tileWidth; tc++){ 
                    var trueX = (c*tileWidth)+tc; 
                    var trueY = (r*tileHeight)+tr;
                    // 转换成实际数组中的位置

                    // 获取非本行的全部像素数+本行之前的所有像素数，就是在数组中的位置
                    var pos = (trueY*(context.width*4))+(trueX*4); 
                    pixels[pos] = red; 
                    pixels[pos+1] = green; 
                    pixels[pos+2] = blue; 
                    pixels[pos+3] = 255;
                }
            }

        }
    }
    ctx.putImageData(context,0,0);//将像素显示出来
    
</script>
</html>