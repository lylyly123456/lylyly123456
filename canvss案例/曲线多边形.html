<html>
    <head>
        <title>canvas demo</title>
    </head>
    <body>        
        <canvas id="canvas" width=700 height=700>A drawing of something.</canvas>
        <script>
            (function(){
                var canvas = document.getElementById("canvas");
                
                if(canvas.getContext){        
                    var context = canvas.getContext("2d");
                    context.translate(350, 350);　　　　//转换了原点
                    context.strokeStyle = "#0f0";        
                    drawGraph(context, 399, -239, 100);
                }
                
                function drawGraph(ctx, R, r, O){
                    var x1 = R - O, y1 = 0, i = 1;
                    ctx.beginPath();
                    for(; i < 20000 || (x2 == R - O && y2 === 0); i++){　　//最大迭代20000次，调的太大页面容易挂起，比较耗资源
                        var x2 = (R+r)*Math.sin(i*Math.PI/72) - (r+O)*Math.sin(((R+r)/r)*(i*Math.PI/72)),　　//下一个坐标位置的三角函数算法
                            y2 = (R+r)*Math.cos(i*Math.PI/72) - (r+O)*Math.cos(((R+r)/r)*(i*Math.PI/72));　　//不太理解的TX可以画图，有助于理解
                        ctx.lineTo(x2, y2);
                        x1 = x2; y1 = y2; 　　//这步骤不能漏掉，交换坐标，进入下次路径
                    }
                    ctx.stroke();
                }
            })();
        </script>
    </body>
</html>